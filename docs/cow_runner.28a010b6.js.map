{"version":3,"sources":["cow_runner/js/cow_runner.js"],"names":["phina","globalize","SCREEN_WIDTH","SCREEN_HEIGHT","PLAYER_POSITION","ASSETS","sound","bgm","bruh","image","titleCow","player","cow1","cow2","cow3","cow4","background","define","superClass","init","superInit","Sprite","addChildTo","setPosition","gridX","center","gridY","Label","text","fontSize","fill","span","onpointstart","SoundManager","playMusic","exit","params","score","result","Button","on","format","url","social","Twitter","createURL","hashtags","window","open","width","height","scoreLabel","x","y","bombGroup","DisplayElement","update","app","p","pointer","getPointing","children","forEach","bomb","remove","hitTestElement","gameover","bind","frame","spawnBomb","Math","randint","Bomb","setVolume","play","randomType","randomAccel","accel","main","GameApp","assets","debug","startLabel","scenes","className","label","nextLabel","domElement","addEventListener","dummy","s","asset","Sound","loadFromBuffer","stop","removeEventListener","run"],"mappings":"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","file":"cow_runner.28a010b6.js","sourceRoot":"../src","sourcesContent":["import bgm from './../sound/cow_runner_bgm.mp3'\nimport bruh from './../sound/bruh.mp3'\nimport titleCow from './../image/title_cow.png'\nimport player from './../image/player.png'\nimport cow1 from './../image/cow1.png'\nimport cow2 from './../image/cow2.png'\nimport cow3 from './../image/cow3.png'\nimport cow4 from './../image/cow4.png'\nimport background from './../image/background.png'\n\n// „Ç∞„É≠„Éº„Éê„É´„Å´Â±ïÈñã\nphina.globalize()\n\nconst SCREEN_WIDTH = 640\nconst SCREEN_HEIGHT = 960\nconst PLAYER_POSITION = 800\nconst ASSETS = {\n  sound: {\n    'bgm': bgm,\n    'bruh': bruh,\n  },\n  image: {\n    'titleCow': titleCow,\n    'player': player,\n    'cow1': cow1,\n    'cow2': cow2,\n    'cow3': cow3,\n    'cow4': cow4,\n    'background': background\n  },\n}\n\n/*\n * „Çø„Ç§„Éà„É´\n */\nphina.define(\"Title\", {\n  superClass: 'DisplayScene',\n  init: function() {\n    // Ë¶™„ÇØ„É©„ÇπÂàùÊúüÂåñ\n    this.superInit();\n\n    // ËÉåÊôØ\n    Sprite('background').addChildTo(this).setPosition(this.gridX.center(), this.gridY.center());\n\n    // „É©„Éô„É´\n    Label({\n      text: 'Áâõ„ÇíÈÅø„Åë„Çã„Å†„Åë„ÅÆ„Ç≤„Éº„É†',\n      fontSize: 48,\n      fill: '#000000',\n    }).addChildTo(this).setPosition(this.gridX.center(), this.gridY.span(4));\n\n    Sprite('titleCow', 256, 256).addChildTo(this).setPosition(this.gridX.center(), this.gridY.center());\n\n    Label({\n      text: '„Çø„ÉÉ„Éó„Åó„Å¶„Çπ„Çø„Éº„Éà',\n      fontSize: 32,\n      fill: '#808080',\n    }).addChildTo(this).setPosition(this.gridX.center(), this.gridY.span(12));\n  },\n\n  // „Çø„ÉÉ„ÉÅ„ÅßÊ¨°„ÅÆ„Ç∑„Éº„É≥„Å∏\n  onpointstart: function() {\n    SoundManager.playMusic('bgm');\n    this.exit();\n  },\n});\n\n/*\n * „É™„Ç∂„É´„Éà\n */\nphina.define(\"Result\", {\n  superClass: 'DisplayScene',\n  init: function(params) {\n    // Ë¶™„ÇØ„É©„ÇπÂàùÊúüÂåñ\n    this.superInit(params);\n\n    // ËÉåÊôØ\n    Sprite('background').addChildTo(this).setPosition(this.gridX.center(), this.gridY.center());\n\n    // Ë©ï‰æ°„ÉÜ„Ç≠„Çπ„Éà\n    Label({\n      text: 'Ë©ï‰æ°',\n      fontSize: 24,\n    }).addChildTo(this).setPosition(this.gridX.center(), this.gridY.span(7));\n\n    // Ë©ï‰æ°\n    Label({\n      text: 'ÈÅø„Åë„ÅüÁâõ„ÅÆÊï∞Ôºö' + params.score,\n      fontSize: 48,\n      fill: '#000000',\n    }).addChildTo(this).setPosition(this.gridX.center(), this.gridY.span(4));\n\n    let result = ''\n    if (params.score <= 10) {\n      result = 'üí©'\n    } else if (params.score > 10 && params.score <= 30) {\n      result = 'üòï'\n    } else if (params.score > 30 && params.score <= 50) {\n      result = 'üòØ'\n    } else if (params.score > 50 && params.score <= 70) {\n      result = 'üòÄ'\n    } else if (params.score > 70 && params.score <= 90) {\n      result = 'üòè'\n    } else if (params.score > 90 && params.score <= 110) {\n      result = 'üòé'\n    } else if (params.score > 110 && params.score <= 200) {\n      result = 'üêÑ'\n    } else if (params.score > 200) {\n      result = 'üëë'\n    }\n\n    // „É©„Éô„É´\n    Label({\n      text: result,\n      fontSize: 64,\n    }).addChildTo(this).setPosition(this.gridX.center(), this.gridY.center());\n\n\n    const tweet = Button({text: \"„ÉÑ„Ç§„Éº„Éà\", fill: '#4682b4'})\n      .setPosition(this.gridX.span(4), this.gridY.span(12))\n      .addChildTo(this)\n      .on('push', ()=> {\n        const text = '„Çπ„Ç≥„Ç¢: {0}\\n{1}'.format(params.score, 'Áâõ„ÇíÈÅø„Åë„Çã„Å†„Åë„ÅÆ„Ç≤„Éº„É†');\n        const url = phina.social.Twitter.createURL({\n          text: text,\n          hashtags: 'Áâõ„ÇíÈÅø„Åë„Çã„Å†„Åë„ÅÆ„Ç≤„Éº„É†',\n          url: 'https://git-gen.github.io/cow_runner',\n        });\n        window.open(url, 'share window', 'width=480, height=320');\n      });\n\n    const play = Button({text: \"„Éó„É¨„Ç§\", fill: '#4682b4'})\n      .setPosition(this.gridX.span(12), this.gridY.span(12))\n      .addChildTo(this)\n      .on('push', ()=> {\n        this.exit()\n      });\n\n  }\n});\n\n/*\n * „É°„Ç§„É≥\n */\nphina.define('Main', {\n  superClass: 'DisplayScene',\n  init: function() {\n    this.superInit({\n      width: SCREEN_WIDTH,\n      height: SCREEN_HEIGHT,\n    })\n\n    // ËÉåÊôØ\n    Sprite('background').addChildTo(this).setPosition(this.gridX.center(), this.gridY.center());\n\n    // „Çπ„Ç≥„Ç¢\n    this.score = 0\n    this.scoreLabel = Label(this.score).addChildTo(this)\n    this.scoreLabel.x = this.gridX.center()\n    this.scoreLabel.y = this.gridY.span(1)\n\n    this.bombGroup = DisplayElement().addChildTo(this)\n\n    // „Éó„É¨„Ç§„É§„Éº\n    this.player = Sprite('player', 40, 60).addChildTo(this)\n    this.player.setPosition(320, PLAYER_POSITION)\n  },\n  // ÊØé„Éï„É¨„Éº„É†Êõ¥Êñ∞Âá¶ÁêÜ\n  update(app) {\n    const p = app.pointer\n    if (p.getPointing()) {\n      if (p.x < 0) {\n        this.player.setPosition(0, PLAYER_POSITION)\n      } else if (p.x > 640) {\n        this.player.setPosition(640, PLAYER_POSITION)\n      } else {\n        this.player.setPosition(p.x, PLAYER_POSITION)\n      }\n    }\n\n    this.bombGroup.children.forEach(\n      function (bomb) {\n        if (this.height < bomb.y) {\n          this.score += 1\n          this.scoreLabel.text = this.score\n          bomb.remove()\n        }\n        if (this.player.hitTestElement(bomb)) {\n          this.gameover()\n        }\n      }.bind(this)\n    )\n\n    if (app.frame % 5 === 0) {\n      this.spawnBomb()\n    }\n  },\n  // ÁàÜÂºæ„Çπ„Éù„Éº„É≥\n  spawnBomb() {\n    const x = Math.randint(0, this.width)\n    const y = -100\n    Bomb(x, y).addChildTo(this.bombGroup)\n  },\n  // „Ç≤„Éº„É†„Ç™„Éº„Éê„Éº\n  gameover() {\n    SoundManager.setVolume(2);\n    SoundManager.play('bruh');\n    this.exit({\n      score: this.score,\n    })\n  },\n})\n\n/*\n * ÁàÜÂºæ\n */\nphina.define('Bomb', {\n  superClass: 'phina.display.Sprite',\n\n  init(x, y) {\n    const randomType = Math.randint(1, 4)\n    switch (randomType) {\n      case 1:\n        this.superInit('cow1', 64, 52)\n        break;\n      case 2:\n        this.superInit('cow2', 128, 52)\n        break;\n      case 3:\n        this.superInit('cow3', 64, 52)\n        break;\n      case 4:\n        this.superInit('cow4', 128, 52)\n        break;\n    }\n\n    const randomAccel = Math.randint(10, 80)\n    this.accel = randomAccel\n    this.setPosition(x, y)\n  },\n\n  update() {\n    this.y += this.accel\n  },\n})\n\n/*\n * „É°„Ç§„É≥Âá¶ÁêÜ\n */\nphina.main(function () {\n  // „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÇíÁîüÊàê\n  const app = GameApp({\n    width: SCREEN_WIDTH,\n    height: SCREEN_HEIGHT,\n    assets: ASSETS,\n    debug: false,\n    startLabel: 'Title',\n    scenes: [\n      {\n        className: 'Title',\n        label: 'Title',\n        nextLabel: 'Main',\n      },\n      {\n        className: 'Main',\n        label: 'Main',\n        nextLabel: 'Result',\n      },\n      {\n        className: 'Result',\n        label: 'Result',\n        nextLabel: 'Main',\n      },\n    ]\n  })\n\n  app.domElement.addEventListener('touchend', function dummy() {\n    const s = phina.asset.Sound();\n    s.loadFromBuffer();\n    s.play().stop();\n    app.domElement.removeEventListener('touchend', dummy);\n  });\n\n  // ÂÆüË°å\n  app.run()\n})\n"]}